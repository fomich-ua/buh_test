<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"><html dir="ltr"><head><meta content="text/html; charset=utf-8" http-equiv="Content-Type"></meta><link rel="stylesheet" type="text/css" href="v8help://service_book/service_style"></link><meta name="GENERATOR" content="MSHTML 11.00.10240.16769"></meta></head><body>
<p>Обробка "Універсальний обмін даними у форматі XML" призначена для завантаження і вивантаження даних в файл з будь-якої конфігурації, реалізованої на платформі 1С:Підприємство 8.</p>
<h2>Режим роботи</h2>
<p>При використанні керованої форми обробка має два режим роботи:<br>1. На клієнті. При використанні цього режиму файли правил і завантажуваних даних передаються з клієнта на сервер, а файл вивантажуваних даних передається з сервера на клієнт. Шляхи до цих файлів, що знаходяться на клієнта, необхідно вказувати у діалоговому вікні безпосередньо перед виконанням дії.<br>2. На сервері. У цьому режимі файли не передаються на клієнт і шляхи до них необхідно вказувати на сервері.<br>Примітка: Файл зовнішньої обробки і файли протоколів обміну завжди повинні знаходитися на сервері незалежно від режиму роботи.</p>
<p>Обробка має чотири закладки</p>
<h2>Вивантаження даних</h2>
<p>Для здійснення вивантаження даних необхідно вказати ім'я файлу, у який буде здійснюватися вивантаження даних і вибрати файл правил обміну. Правила обміну для будь-яких конфігурацій можуть бути налаштовані в спеціалізованій конфігурації "Конвертація даних, редакція 2". </p>
<p>Для вивантаження документів і записів незалежних періодичних регістрів дані необхідно вказати період - "Дату початку" та "Дату завершення". Результуючий файл із вивантаженими даними може бути стиснутий.</p>
<p>На закладці "Правила вивантаження даних" можна вибрати ті типи об'єктів, які повинні завантажуватися, настроїти відбори для вибірки об'єктів, або вказати вузол обміну даними, для якого потрібно вивантажувати дані.</p>
<p>На закладці "Параметри вивантаження" можна вказати додаткові параметри вивантаження даних.</p>
<p>На закладці "Коментар" можна написати довільний текст-коментар, який включається в файл обміну.</p>
<h2>Завантаження даних</h2>
<p>Для здійснення завантаження даних необхідно вказати ім'я файлу, з якого буде здійснюватися завантаження даних. </p>
<p>Є можливість настроїти завантаження даних в транзакції. Для цього необхідно звести прапорець "Використовувати транзакції" і вказати кількість елементів в одній транзакції при завантаженні.</p>
<p>"Завантажувати дані в режимі обміну (ОбменДанными.Загрузка = Истина)" – якщо прапорець встановлений, то завантаження об'єктів буде виконуватися з встановленою ознакою завантаження. Це означає, що при записі об'єктів в базу даних будуть відключені всі платформені та прикладні перевірки. Виняток складають документи, які записуються в режимі проведення або скасування проведення. Проведення і скасування проведення документа виконується завжди без встановлення режиму завантаження, тобто перевірки будуть виконуватися.</p>
<h2>Додаткові настройки</h2>
<p>Закладка використовується для детальної настройки вивантаження і завантаження даних.</p>
<p>"Режим налагодження" – прапор для завдання режиму налагодження обміну. Якщо цей прапор встановлений, то процес обміну даними не буде зупинений при виникненні якої-небудь помилки. Обмін завершиться до кінця з висновком налагоджувальних повідомлень у файл протоколу обміну. Цей режим рекомендується використовувати при налагодженні правил обміну.</p>
<p>"Виведення інформаційних повідомлень у вікно повідомлень" – якщо прапорець встановлений, то у вікно повідомлень буде виводитися протокол процесу обміну даними.</p>
<p>"Кількість оброблених об'єктів для оновлення статусу" – параметр служить для визначення кількості оброблених елементів перед зміною рядка стану завантаження/вивантаження</p>
<p>"Настройки вивантаження даних" – дозволяють визначити кількість елементів, що обробляються в одній транзакції при вивантаженні даних, вивантажувати і обробляти лише ті об'єкти, на які є права доступу, настроїти тип зміни реєстрації для вивантажених об'єктів через плани обміну.</p>
<p>"Використовувати оптимізований формат для обміну даними (V8 - V8, версія обробки не нижче 2.0.18)" – оптимізований формат повідомлення обміну припускає наявність вузла "ИнформацияОТипахДанных" у заголовку повідомлення, в який вивантажується інформація про типи даних. Це дозволяє прискорити процес завантаження даних.</p>
<p>"Використовувати транзакції при вивантаженні для планів обміну" – прапор визначає режим використання транзакцій при вивантаженні даних при вибірці змін на вузлах планів обміну. Якщо прапорець встановлений, то вивантаження даних буде виконуватися в транзакції.</p>
<p>"Кількість елементів в транзакції" – визначає максимальне число елементів даних, які поміщаються в повідомлення в межах однієї транзакції бази даних. Якщо значення параметра дорівнює 0 (значення по умовчанню), то всі дані поміщаються в рамках однієї транзакції. Такий режим є рекомендованим, так як гарантує узгодженість даних, які розміщені в повідомлення. Але при створенні повідомлення в багатокористувацькому режимі можуть бути конфлікти блокувань між транзакцією, в якій дані поміщаються в повідомлення, та транзакціями, виконуваними іншими користувачами. Для зниження ймовірності виникнення таких конфліктів можна встановити значення цього параметра, відмінне від значення по умовчанню. Чим менше значення, тим менше ймовірність конфлікту блокувань, але вище ймовірність розміщення в повідомлення неузгоджених даних.</p>
<p>"Вивантажувати об'єкти на які є права доступу" – якщо прапорець встановлений, то вибірка об'єктів інформаційної бази буде виконуватися з урахуванням прав доступу поточного користувача програми. Це передбачає використання літерала "РАЗРЕШЕННЫЕ" у тексті запиту для вибірки даних.</p>
<p>"Автоматично вилучати неправильні символи з рядків для запису в XML" – якщо прапорець встановлений, то при записі даних в протокол обміну неприпустимі символи будуть вилучені. Символи перевіряються на відповідність рекомендації XML 1.0.</p>
<p>"Зміни реєстрації для вузлів обміну після вивантаження" – поле визначає режим роботи з реєстрацією змін даних після завершення вивантаження даних. Можливі значення:</p>
<ul><li>
<div>Не вилучати реєстрацію – після вивантаження даних реєстрація змін на вузлі вилучена не буде.</div>
</li><li>
<div>Повністю вилучити реєстрацію для вузла обміну – після вивантаження даних реєстрація змін на вузлі буде повністю вилучена.</div>
</li><li>
<div>Вилучити реєстрацію тільки для вивантажених метаданих – після вивантаження даних реєстрація змін на вузлі буде вилучена тільки для об'єктів метаданих, які були вказані до вивантаження.</div></li></ul><p><br>"Протокол обміну" – дозволяє настроїти виведення інформаційних повідомлень у вікно повідомлень, ведення і запис в окремий файл протоколу обміну.</p>
<p>"Ім'я файлу протоколу обміну" – ім'я файла для виведення протоколу процесу обміну даними.</p>
<p>"Протокол завантаження (для COM - з'єднання) – ім'я файлу для виведення протоколу процесу обміну даними в базі-приймачі при обміні через COM-з'єднання. Важливо: шлях до файлу повинен бути доступний з комп'ютера, на якому встановлена база-приймач.</p>
<p>"Дописувати дані в протокол обміну" – якщо прапорець встановлений, то вміст файлу протоколу обміну зберігається, якщо файл протоколу вже існує.</p>
<p>"Виведення в протокол інформаційних повідомлень" – якщо прапорець встановлений, то в протокол обміну будуть виводитися повідомлення інформативного характеру, крім повідомлень про помилки обміну.</p>
<p>"Відкривати файли протоколів обміну після виконання операцій" – якщо прапорець встановлений, то після виконання обміну даними файли протоколів обміну будуть автоматично відкриті для перегляду.</p>
<h2>Вилучення даних</h2>
<p>Закладка потрібна тільки для розробників правил обміну. Дозволяє вилучати з інформаційної бази довільні об'єкти.</p>
<h2>Налагодження вивантаження і завантаження даних </h2>
<p>Обробка дозволяє здійснювати налагодження обробників подій і генерувати модуль налагодження з файлу-правил або файлу даних.</p>
<p>Включення режиму налагодження обробників вивантаження здійснюється на закладці "Вивантаження даних" установкою прапорця "Режим налагодження обробників вивантаження". Відповідно, на закладці "Завантаження даних" включення режиму налагодження завантаження виконується установкою прапорця "Режим налагодження обробників завантаження". </p>
<p>Після установки режиму налагодження обробників стане доступною кнопка настройки налагодження. Після натискання на цю кнопку відкриється вікно настройки.</p>
<p>Настройка налагодження обробників виконується в чотири кроки:</p>
<h3>Крок 1: Вибір режиму налагодження алгоритмів</h3>
<p><br>На першому кроці необхідно визначитися з режимом налагодження алгоритмів:</p>
<ul><li>
<div><font size="1">Без <font size="1">налагодження</font> алгоритмів</font></div>
</li><li>
<div><font size="1">Викликати алгоритми як процедури</font></div>
</li><li>
<div><font size="1">Підставляти код алгоритмів за місцем виклику</font><font size="1"><br></font></div></li></ul><p>Перший режим зручно використовувати, коли ми точно знаємо, що помилка в оброблювачі не пов'язана з кодом будь-якого алгоритму. У цьому режимі код алгоритмів не вивантажується в модуль налагодження. Алгоритми виконуються в контексті оператора "Выполнить()" і їх код недоступний для налагодження.</p>
<p>Другий режим необхідно використовувати в тих випадках, коли помилка знаходиться в коді алгоритму. При установці цього режиму алгоритми будуть вивантажені як окремі процедури. У момент виклику алгоритму з якого-небудь обробника відбувається звернення до відповідної процедури обробки. Цей режим зручно використовувати, коли для передачі параметрів в алгоритми використовується глобальна змінна "Параметри". Обмеження використання цього режиму в тому, що при налагодженні в алгоритмі недоступні локальні змінні обробника, з якого він викликається. </p>
<p>Третій режим налагодження використовується, як і в другому випадку, при налагодженні коду алгоритмів і в тих випадках, при яких другий режим відладки не підходить. При установці цього режиму алгоритми будуть вивантажені як інтегрований код в обробниках. Тобто замість оператора виклику алгоритму вставляється повний код алгоритму з урахуванням вкладених алгоритмів. У цьому режимі немає обмежень на використання локальних змінних обробника, однак є обмеження при налагодження алгоритмів з рекурсивным викликом. </p>
<h3>Крок 2: Формування модуля налагодження</h3>
<p><br>На другому кроці необхідно вивантажити обробників натисканням на кнопку "Сформувати модуль налагодження вивантаження (завантаження)". Сформовані обробники та алгоритми будуть виведені в окреме вікно для перегляду. Вміст модуля налагодження необхідно скопіювати в буфер обміну, натисканням на кнопку "Копіювати в буфер обміну".</p>
<h3>Крок 3: Створення зовнішньої обробки</h3>
<p><br>На цьому кроці необхідно запустити конфігуратор і створити нову зовнішню обробку. В модуль обробки необхідно вставити вміст буфера обміну (модуль налагодження) і зберегти обробку під будь-яким ім'ям. </p>
<h3>Крок 4: Підключення зовнішньої обробки</h3>
<p><br>На четвертому, завершальному кроці, треба вказати ім'я файлу зовнішньої обробки в полі вводу. При цьому програма виконує перевірку з часу створення (оновлення) файлу обробки. Якщо обробка має більш ранню версію, ніж версія файлу модуля налагодження, то буде виведено попередження і форма настройки закрита не буде.</p>
<p>Примітка: Можливість налагодження глобального обробника конвертації "Після завантаження правил обміну" не підтримується.</p></body></html>